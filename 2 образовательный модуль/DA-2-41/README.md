# Анализ временных рядов: скользящее среднее

## Категории
Аналитика данных

## Уровень
2

## Описание задачи
Задача заключается в том, чтобы улучшить анализ временного ряда с помощью метода **скользящего среднего**.  
Скользящее среднее позволяет сгладить шум в данных и выявить общую тенденцию временного ряда.

## Цель
- Добавить шум к синтетическому временному ряду.  
- Применить сглаживание с окном `5`.  
- Визуально показать разницу между исходным рядом и сглаженным.

## Используемые библиотеки
- `pandas` — работа с временным рядом и расчёт скользящего среднего.  
- `numpy` — генерация шума и синтетических данных.  
- `matplotlib` — построение графиков.

## Шаги реализации
1. Использовать временной ряд из **DA-1-42**.  
2. Добавить к данным шум.  
3. Посчитать скользящее среднее с окном `5`.  
4. Построить график с исходным и сглаженным рядом.  
5. Вывести разницу между исходным и сглаженным рядом.

## Источники данных
- Синтетический временной ряд.

## Материалы для изучения
- [pandas.Series.rolling() — официальная документация (EN)](https://pandas.pydata.org/docs/reference/api/pandas.Series.rolling.html)  
- [Rolling Window в Pandas — гайд (RU)](https://konstantinklepikov.github.io/myknowlegebase/notes/pandas-rolling-window.html)

## Baseline и метрики
- **Baseline**: корректное сглаживание временного ряда.  
- **Метрика**: на графике должно быть видно снижение шума и более плавная линия сглаженного ряда.


<details>
<summary>
Алгоритм кода (наработки)
</summary>

**Первая часть (создание dataframe):**
``` bash
1. составим dataframe где у нас будут измеряемые температуры возле НГУ за 10 дня (данные взяты с официальной статистики, но измерения температур взяты на глаз).

2.получаем в dataframe три строички:  дата: 30.09, 01.10, 02.10, 03.10, 04.10, 05.10, 06.10, 07.10, 08.10, 09.10                                                                                                        

                                      время: 06:00, 12:30, 18:45, 09:15, 15:20, 21:00, 03:30, 09:45, 15:00, 21:30                                                                                                                                                                                                                                                       

                                      температура: 0.9, 0.0, 7.5, 5.0, 3.4, 2.2, 1.5, 1.7, 0.3, 1.0

```
![График откуда берутся данные](https://github.com/ellinar5/Introduction-to-the-project/raw/main/2%20%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9%20%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C/DA-2-41/%D0%93%D1%80%D0%B0%D1%84%D0%B8%D0%BA%20%D0%BE%D1%82%20%D0%BA%D1%83%D0%B4%D0%B0%20%D0%B1%D0%B5%D1%80%D1%83%D1%82%D1%81%D1%8F%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5.png)

**Вторая часть (шум данных):**
``` bash
1.Теперь предположим что данные не точные - то есть шум данных, то есть погрешность данных для каждой температуры.
(На графике видно, что температура колеблется в пределах примерно ±1°C от среднего значения, которое составляет 2.6°C.).

2.Это означает, что погрешность измерений (шум данных) составляет около ±1°C.): 0.9 ± 1, 0.0 ± 1, 7.5 ± 1, 5.0 ± 1, 3.4 ± 1, 2.2 ± 1, 1.5 ± 1, 1.7 ± 1, 0.3 ± 1, 1.0 ± 1.
```

**Третья часть (скользящее среднее):**
``` bash
1.Переводим столбик с температурами в отдельный массив.

2.Далее вычисляем скользящее среднее с окном 5(k=5). Пробегаемся по всему массиву и берем по одной цифре, так чтобы длина чисел была равна окну (то есть k). Для значений до k написать просто Nan.
```

**Четвертая часть (Строим график):**
``` bash
1.Для начала мы отдельно строим создадим отдельный массив - исходный временной ряд.

2.Для начала мы отдельно строим создадим отдельный массив - скользящее среднее

3.На основе данных массивов построим три графика: на основе исходного временного ряда, сколязящего среднего и их вместе на одном графики
```

**Пятая часть (Вывод):В конце выводим разницу между скользящее среднем и исходного временного ряд**

</details>


<details>
<summary>
Алгоритм кода (функции)
</summary>

**Работа с функциями:**
``` bash
1. Отдельно от всех функций создаем DataFrame.

2.вторая функция- Передаем все данные которые есть в DataFrame. Далее мы к нашему DataFrame
добавляем шум данных (На графике видно, что температура колеблется в пределах примерно ±1°C от среднего значения, которое составляет 2.6°C)

3.третья функция - Передаем все данные которые есть в DataFrame. Далее мы Переводим столбик с температурами в отдельный массив и Далее вычисляем скользящее среднее с окном 5(k=5). Пробегаемся по всему массиву и берем по одной цифре, так чтобы длина чисел была равна окну (то есть k). Для значений до k написать просто Nan

4.четвертая функция - Передаем все данные которые есть в DataFrame. Далее мы Для начала мы отдельно строим создадим отдельный массив - исходный временной ряд, Для начала мы отдельно строим создадим отдельный массив - скользящее среднее и На основе данных массивов построим три графика: на основе исходного временного ряда, сколязящего среднего и их вместе на одном графики


5.if name == "main":

1)ВЫВОДИМ ИЗНАЧАЛЬНЫЙ DataFrame
2)ВЫВОДИМ РЕЗУЛЬТАТ ИЗ ФУНКЦИИ 2
3)ВЫВОДИМ РЕЗУЛЬТАТ ИЗ ФУНКЦИИ 3
4)ВЫВОДИМ РЕЗУЛЬТАТ ИЗ ФУНКЦИИ 4
5)В конце выводим разницу между скользящее среднем и исходного временного ряд
```
</details>

<details>
<summary>
Алгоритм кода (обработка ошибок)
</summary>

**Работа с ошибками:**
``` bash
- 1)Проверить что в DataFrame количество столбцов совпадала по всем сторичкам
- 2) Проверяем как распределяется шум данных
- 3) Проверяем как заполнился массив, чтобы количества цифр было равно столько сколь было. Провярем что на скользящем среднее что у нас точно значения до k равны Nan
- 4) проверка что графики были посторины точно
- 5) проверка что все данные верные на выходи и особенно здесь:В конце выводим разницу между скользящее среднем и исходного временного ряд
```
</details>



<details>
<summary>
Результат ввиде графиков
</summary>
  
![Три графика](https://github.com/ellinar5/Introduction-to-the-project/raw/main/2%20%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9%20%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C/DA-2-41/%D0%A2%D1%80%D0%B8%20%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0.png)

</details>


